<!-- 
Author       : Aishwarya.S.R
Date Updated : 05.06.2020
Source       : http://davidshimjs.github.io/qrcodejs/
-->
<!DOCTYPE html>
<html>
<head>
    <title>Gyan-NamChain | QR Gen</title>
    <link rel="icon" type="image/png" href="../images/logo.jpg">
    <link href="../css/qr.css" rel="stylesheet">
</head>
    
<body>

    <!-- 
    Author       : Ramaguru Radhakrishnan
    Date Updated : 18.05.2020
    -->
    <script src=" https://cdn.jsdelivr.net/npm/web3/dist/web3.js"></script>
    <script src= "../js/abi.js"></script>
    <script>
        var account;
		window.addEventListener('load', async () => {

	
		if (typeof window.ethereum !== 'undefined') { 
			console.log("MetaMask is Available :) !"); 
			}
			
		// Modern DApp browsers
		if (window.ethereum) {
			window.web3 = new Web3(ethereum);
			
			// To prevent the page reloading when the MetaMask network changes
			ethereum.autoRefreshOnNetworkChange = false;
			
			// To Capture the account details from MetaMask
			const accounts = await ethereum.enable();
			account = accounts[0];
				
			}
		// Legacy DApp browsers
		else if (window.web3) {
			//window.web3 = new Web3(web3.currentProvider);
			window.web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/cbd9dc11b30147e9a2cc974be655ef7c")); 
			}
		// Non-DApp browsers
		else {
			console.log('Non-Ethereum browser detected. Please install MetaMask');
			}
			
			});
			
    </script>
    <input  type="text" id="qr-data" onchange="gqr()" >
    <p>QRCODE</p>
    <div id="qrcode"></div>
	</body>
    
    
    <script src="../js/qrcode.min.js"></script>
    <script>
        var qrdata=document.getElementById('qr-data');
        var qrcode=new QRCode(document.getElementById('qrcode'));
        function gqr()
        {
            var data=qrdata.value;
            qrcode.makeCode(data);
        }
    </script>
</html>